<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.45">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>File Upload | whispr</title><meta name="description" content="whispr docs">
    <link rel="modulepreload" href="/whispr/assets/app.929136b3.js"><link rel="modulepreload" href="/whispr/assets/fileupload.html.a68cff0b.js"><link rel="modulepreload" href="/whispr/assets/fileupload.html.c0862629.js"><link rel="prefetch" href="/whispr/assets/index.html.6e447883.js"><link rel="prefetch" href="/whispr/assets/apm.html.0316d3dd.js"><link rel="prefetch" href="/whispr/assets/indexing.html.660551ba.js"><link rel="prefetch" href="/whispr/assets/installation.html.5a4b4118.js"><link rel="prefetch" href="/whispr/assets/security.html.fd906ff8.js"><link rel="prefetch" href="/whispr/assets/testing.html.1081e4e4.js"><link rel="prefetch" href="/whispr/assets/graphql.html.61de9216.js"><link rel="prefetch" href="/whispr/assets/introduction.html.cdebf295.js"><link rel="prefetch" href="/whispr/assets/rest.html.d8f374b4.js"><link rel="prefetch" href="/whispr/assets/index.html.2f57f49a.js"><link rel="prefetch" href="/whispr/assets/building.html.3b069268.js"><link rel="prefetch" href="/whispr/assets/community.html.fbd9bf2a.js"><link rel="prefetch" href="/whispr/assets/credits.html.b3292899.js"><link rel="prefetch" href="/whispr/assets/guidelines.html.4300b492.js"><link rel="prefetch" href="/whispr/assets/index.html.703588c0.js"><link rel="prefetch" href="/whispr/assets/index.html.07ff056b.js"><link rel="prefetch" href="/whispr/assets/index.html.ab95e774.js"><link rel="prefetch" href="/whispr/assets/tagGroup.html.622decbe.js"><link rel="prefetch" href="/whispr/assets/webhook.html.116c3f60.js"><link rel="prefetch" href="/whispr/assets/whisp.html.35538af0.js"><link rel="prefetch" href="/whispr/assets/index.html.eb78b495.js"><link rel="prefetch" href="/whispr/assets/index.html.9691d929.js"><link rel="prefetch" href="/whispr/assets/index.html.5c9b1a60.js"><link rel="prefetch" href="/whispr/assets/404.html.0f07aaf0.js"><link rel="prefetch" href="/whispr/assets/index.html.53da5792.js"><link rel="prefetch" href="/whispr/assets/apm.html.eb2c8721.js"><link rel="prefetch" href="/whispr/assets/indexing.html.c4791dee.js"><link rel="prefetch" href="/whispr/assets/installation.html.4484a976.js"><link rel="prefetch" href="/whispr/assets/security.html.c3625969.js"><link rel="prefetch" href="/whispr/assets/testing.html.0acb3c65.js"><link rel="prefetch" href="/whispr/assets/graphql.html.786c8722.js"><link rel="prefetch" href="/whispr/assets/introduction.html.ba88f57a.js"><link rel="prefetch" href="/whispr/assets/rest.html.0ff18d41.js"><link rel="prefetch" href="/whispr/assets/index.html.1297be35.js"><link rel="prefetch" href="/whispr/assets/building.html.005b3d79.js"><link rel="prefetch" href="/whispr/assets/community.html.3ac003c3.js"><link rel="prefetch" href="/whispr/assets/credits.html.f2b84354.js"><link rel="prefetch" href="/whispr/assets/guidelines.html.847af514.js"><link rel="prefetch" href="/whispr/assets/index.html.303dd742.js"><link rel="prefetch" href="/whispr/assets/index.html.354004cd.js"><link rel="prefetch" href="/whispr/assets/index.html.f677c165.js"><link rel="prefetch" href="/whispr/assets/tagGroup.html.17f67501.js"><link rel="prefetch" href="/whispr/assets/webhook.html.82d44d7e.js"><link rel="prefetch" href="/whispr/assets/whisp.html.0f936862.js"><link rel="prefetch" href="/whispr/assets/index.html.276a6927.js"><link rel="prefetch" href="/whispr/assets/index.html.98cf7db9.js"><link rel="prefetch" href="/whispr/assets/index.html.dad62e6b.js"><link rel="prefetch" href="/whispr/assets/404.html.915d602b.js"><link rel="prefetch" href="/whispr/assets/404.34d81b04.js"><link rel="prefetch" href="/whispr/assets/Layout.7622f4b3.js">
    <link rel="stylesheet" href="/whispr/assets/style.67102f5e.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/whispr/" class=""><!----><span class="site-name">whispr</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/whispr/introduction/" class="sidebar-item sidebar-heading" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----></li><li><a href="/whispr/architecture/" class="sidebar-item sidebar-heading" aria-label="Architecture"><!--[--><!--]--> Architecture <!--[--><!--]--></a><!----></li><li><a href="/whispr/installation.html" class="sidebar-item sidebar-heading" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a><!----></li><li><a href="/whispr/security.html" class="sidebar-item sidebar-heading" aria-label="Security"><!--[--><!--]--> Security <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/whispr/api/introduction.html" class="sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----></li><li><a href="/whispr/api/graphql.html" class="sidebar-item" aria-label="GraphQL API"><!--[--><!--]--> GraphQL API <!--[--><!--]--></a><!----></li><li><a href="/whispr/api/rest.html" class="sidebar-item" aria-label="REST API"><!--[--><!--]--> REST API <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/whispr/filters/" class="sidebar-item sidebar-heading" aria-label="Filters"><!--[--><!--]--> Filters <!--[--><!--]--></a><!----></li><li><a href="/whispr/testing.html" class="sidebar-item sidebar-heading" aria-label="Testing"><!--[--><!--]--> Testing <!--[--><!--]--></a><!----></li><li><a href="/whispr/events/" class="sidebar-item sidebar-heading" aria-label="Event system"><!--[--><!--]--> Event system <!--[--><!--]--></a><!----></li><li><a href="/whispr/webhooks/" class="sidebar-item sidebar-heading" aria-label="Webhooks"><!--[--><!--]--> Webhooks <!--[--><!--]--></a><!----></li><li><a href="/whispr/plugins/" class="sidebar-item sidebar-heading" aria-label="Plugins"><!--[--><!--]--> Plugins <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/whispr/fileupload.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="File Upload"><!--[--><!--]--> File Upload <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/whispr/fileupload.html#aws-dependency" class="router-link-active router-link-exact-active sidebar-item" aria-label="AWS Dependency"><!--[--><!--]--> AWS Dependency <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/whispr/fileupload.html#usage" class="router-link-active router-link-exact-active sidebar-item" aria-label="Usage"><!--[--><!--]--> Usage <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/whispr/fileupload.html#upload" class="router-link-active router-link-exact-active sidebar-item" aria-label="Upload"><!--[--><!--]--> Upload <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/whispr/fileupload.html#download" class="router-link-active router-link-exact-active sidebar-item" aria-label="Download"><!--[--><!--]--> Download <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a href="/whispr/indexing.html" class="sidebar-item sidebar-heading" aria-label="Indexing"><!--[--><!--]--> Indexing <!--[--><!--]--></a><!----></li><li><a href="/whispr/apm.html" class="sidebar-item sidebar-heading" aria-label="APM"><!--[--><!--]--> APM <!--[--><!--]--></a><!----></li><li><a href="/whispr/troubleshoot/" class="sidebar-item sidebar-heading" aria-label="Troubleshoot"><!--[--><!--]--> Troubleshoot <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="file-upload" tabindex="-1"><a class="header-anchor" href="#file-upload" aria-hidden="true">#</a> File Upload</h1><h2 id="aws-dependency" tabindex="-1"><a class="header-anchor" href="#aws-dependency" aria-hidden="true">#</a> AWS Dependency</h2><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>This feature is currently <strong>only available with AWS</strong>.</p></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>This feature is only supported by the GraphQL-API, not the REST-API.</p></div><p>You need to provide the following environment variable.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Optional</span>
AWS_S3_ENDPOINT <span class="token comment"># To set the S3 endpoint to something else then the default</span>

<span class="token comment"># Required</span>
AWS_BUCKET_NAME <span class="token comment"># The bucket name where the files should be uploaded</span>

<span class="token comment"># Required (Auth: Alternative 1 - auto)</span>
AWS_CONTAINER_CREDENTIALS_RELATIVE_URI <span class="token comment"># Automatically populated by ECS</span>

<span class="token comment"># Required (Auth: Alternative 2 - manual)</span>
COGNITO_ADMIN_USER <span class="token comment"># Username with permissions to write &amp; read from S3</span>
COGNITO_ADMIN_PW <span class="token comment"># Password for admin user</span>
COGNITO_USER_POOL_ID <span class="token comment"># Cognito User Pool ID</span>
COGNITO_CLIENT_ID_ADMIN <span class="token comment"># Cognito User Pool Client ID</span>
COGNITO_REGION <span class="token comment"># Region of Cognito instance</span>
COGNITO_IDENTITY_POOL_ID <span class="token comment"># Cognito Identity Pool ID</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h2><h3 id="upload" tabindex="-1"><a class="header-anchor" href="#upload" aria-hidden="true">#</a> Upload</h3><p>To upload a file together with your Whisp, you can use the attachment field. In order to upload a new File, pass:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;attachments&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Information about where you need the file to be used inside the whisp&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;file&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;newFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;binary&gt;&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The binary inside of <strong>&quot;newFile&quot;</strong> will be uploaded to the S3-Bucket. The created S3-Key will be set as content of <strong>&quot;file&quot;</strong>.</p><p>When you pass the attachment property during an update, it will replace the old content. In order to keep previous uploaded files, you have to pass them along with new files like so:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;attachments&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Information about where you need the file to be used inside the whisp&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;file&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;oldFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;S3-Key-of-old-file&gt;&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Information about where you need the file to be used inside the whisp&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;file&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;newFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;binary&gt;&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="download" tabindex="-1"><a class="header-anchor" href="#download" aria-hidden="true">#</a> Download</h3><p>When you query your attachments the result will look like this:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;attachments&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Information about where you need the file to be used inside the whisp&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;S3-Key&gt;&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To get the Binary of your file, send a <strong>GET</strong>-Request to <code>&lt;whispr-url&gt;/file/&lt;S3-Key&gt;</code>.</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ahmedrefai4@gmail.com">ahmed.refai</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/whispr/plugins/" class="" aria-label="Plugins"><!--[--><!--]--> Plugins <!--[--><!--]--></a></span><span class="next"><a href="/whispr/indexing.html" class="" aria-label="Indexing"><!--[--><!--]--> Indexing <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/whispr/assets/app.929136b3.js" defer></script>
  </body>
</html>
