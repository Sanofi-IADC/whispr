(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{384:function(e,t,s){"use strict";s.r(t);var n=s(42),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"testing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing"}},[e._v("#")]),e._v(" Testing")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# unit tests")]),e._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# e2e tests")]),e._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run test:e2e\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# test coverage")]),e._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run test:cov\n")])])]),s("h2",{attrs:{id:"end-to-end-tests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#end-to-end-tests"}},[e._v("#")]),e._v(" End to End Tests")]),e._v(" "),s("p",[e._v("In order to run end to end tests you need "),s("code",[e._v("mongo")]),e._v(", "),s("code",[e._v("redis")]),e._v(" and "),s("code",[e._v("localstack")]),e._v(" to be up and running. In order to do that you up the dockers in "),s("code",[e._v("docker-compose.dev.yml")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("docker-compose -f docker-compose.dev.yml up -d\n")])])]),s("blockquote",[s("p",[s("strong",[e._v("Note")]),e._v(" : Be aware that it will create entities in the DB and in the S3 bucket. This could interfere with your local data.")])]),e._v(" "),s("h2",{attrs:{id:"debugging-tests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#debugging-tests"}},[e._v("#")]),e._v(" Debugging tests")]),e._v(" "),s("p",[e._v("You can debug the tests in your IDE by running "),s("code",[e._v("npm run test:debug")]),e._v(" or "),s("code",[e._v("npm run test:e2e:debug")]),e._v(" and the launching "),s("code",[e._v("Attach to Node process")]),e._v(" in the debugging tab in VSCode")]),e._v(" "),s("h2",{attrs:{id:"load-testing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#load-testing"}},[e._v("#")]),e._v(" Load testing")]),e._v(" "),s("p",[e._v("Load testing is implemented using https://k6.io/, and can be executed locally, on a remote server or directly within the CI pipeline. The current load tests are simple and can be considered experimental. PRs for more comprehensive load tests are welcome!")]),e._v(" "),s("p",[e._v("To run the tests, install K6: https://k6.io/docs/getting-started/installation/.")]),e._v(" "),s("p",[e._v("Then run the script:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("k6 run tests/load/whisp-create.load.js\n")])])]),s("h3",{attrs:{id:"execution-in-ci"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#execution-in-ci"}},[e._v("#")]),e._v(" Execution in CI")]),e._v(" "),s("ul",[s("li",[e._v("Load tests are executed within the CI pipeline in the K6 load tests workflow")]),e._v(" "),s("li",[e._v("This is only a beta implementation and is not currently defined as a required passing action for a PR to be merged, but if it fails this is a good indication that the PR introduces performance issues which should be investigated before the PR is approved")]),e._v(" "),s("li",[e._v("Due to an issue in GitHub Actions, only a simple test with a set number of VUs and duration is defined")])])])}),[],!1,null,null,null);t.default=a.exports}}]);